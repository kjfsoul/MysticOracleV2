import{r as i,u as x,am as f,j as e}from"./index-B2YqtOc4.js";const y=()=>{const[o,u]=i.useState([]),[h,n]=i.useState(!0),[l,c]=i.useState(null),{user:r}=x(),[,d]=f();i.useEffect(()=>{if(!r){d("/auth?redirect=/subscription");return}(async()=>{try{n(!0);const t=await fetch("/.netlify/functions/stripe-plans");if(!t.ok)throw new Error("Failed to fetch subscription plans");const a=await t.json();u(a.plans),n(!1)}catch(t){console.error("Error fetching plans:",t),c("Failed to load subscription plans. Please try again later."),n(!1)}})()},[r,d]);const m=async s=>{try{const t=await fetch("/.netlify/functions/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:s,userId:r==null?void 0:r.id})});if(!t.ok)throw new Error("Failed to create checkout session");const{url:a}=await t.json();window.location.href=a}catch(t){console.error("Error creating checkout session:",t),c("Failed to initiate checkout. Please try again later.")}};if(h)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})});if(l)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[e.jsx("div",{className:"text-red-500 mb-4",children:l}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded",children:"Try Again"})]});const p=o.length>0?o:[{id:"price_monthly",name:"Monthly",description:"Full access to all features",price:9.99,interval:"month",features:["Daily personalized tarot readings","Advanced astrological insights","Journal with AI analysis","Custom tarot spreads","Priority customer support"]},{id:"price_yearly",name:"Yearly",description:"Save 20% with annual billing",price:95.88,interval:"year",features:["All monthly features","20% discount","Exclusive seasonal rituals","Early access to new features","Free custom tarot deck design"]}];return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Upgrade Your Spiritual Journey"}),e.jsx("p",{className:"text-center text-gray-400 mb-12",children:"Choose the plan that best fits your path"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:p.map(s=>e.jsxs("div",{className:"border border-purple-500 rounded-xl overflow-hidden bg-gradient-to-b from-purple-900/30 to-indigo-900/30 backdrop-blur-sm",children:[e.jsxs("div",{className:"p-6 border-b border-purple-500/30",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:s.name}),e.jsx("p",{className:"text-gray-300 mb-4",children:s.description}),e.jsxs("div",{className:"flex items-end",children:[e.jsxs("span",{className:"text-4xl font-bold",children:["$",typeof s.price=="number"?s.price.toFixed(2):s.price]}),e.jsxs("span",{className:"text-gray-400 ml-2",children:["/",s.interval]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"What's included:"}),e.jsx("ul",{className:"space-y-3 mb-8",children:s.features.map((t,a)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-green-400 mr-2 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:t})]},a))}),e.jsx("button",{onClick:()=>m(s.id),className:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors",children:"Subscribe Now"})]})]},s.id))}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsx("p",{className:"text-gray-400",children:"All plans include a 7-day free trial. Cancel anytime."}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"By subscribing, you agree to our Terms of Service and Privacy Policy."})]})]})};export{y as default};
