import{c as S,r as u,j as e,g as q,P as R,k as B,N as W,T as Z,m as G,n as b,p as N,C as h,e as x,a as w,b as k,d as y,f as C,B as g,M as H}from"./index-C07lX9-t.js";import{T as f,g as X,s as Y}from"./tarot-deck-config-CUtchsZt.js";import{A as D,b as P,a as A}from"./alert-BIm_3WBS.js";import{C as K}from"./circle-alert-CzrHIPRW.js";import{D as J}from"./download-DV1eGbce.js";/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ee=S("circle-check-big",Q);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],ae=S("upload",se);var j="Progress",v=100,[te,fe]=q(j),[re,ie]=te(j),E=u.forwardRef((s,a)=>{const{__scopeProgress:t,value:o=null,max:n,getValueLabel:l=ne,...d}=s;(n||n===0)&&!I(n)&&console.error(le(`${n}`,"Progress"));const c=I(n)?n:v;o!==null&&!$(o,c)&&console.error(oe(`${o}`,"Progress"));const m=$(o,c)?o:null,r=p(m)?l(m,c):void 0;return e.jsx(re,{scope:t,value:m,max:c,children:e.jsx(R.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":p(m)?m:void 0,"aria-valuetext":r,role:"progressbar","data-state":L(m,c),"data-value":m??void 0,"data-max":c,...d,ref:a})})});E.displayName=j;var _="ProgressIndicator",V=u.forwardRef((s,a)=>{const{__scopeProgress:t,...o}=s,n=ie(_,t);return e.jsx(R.div,{"data-state":L(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...o,ref:a})});V.displayName=_;function ne(s,a){return`${Math.round(s/a*100)}%`}function L(s,a){return s==null?"indeterminate":s===a?"complete":"loading"}function p(s){return typeof s=="number"}function I(s){return p(s)&&!isNaN(s)&&s>0}function $(s,a){return p(s)&&!isNaN(s)&&s<=a&&s>=0}function le(s,a){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${v}\`.`}function oe(s,a){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${v} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var U=E,ce=V;const z=u.forwardRef(({className:s,value:a,...t},o)=>e.jsx(U,{ref:o,className:B("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:e.jsx(ce,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));z.displayName=U.displayName;function M(s){return new Promise(a=>{const t=new Image;t.onload=()=>a(!0),t.onerror=()=>a(!1),t.src=s})}async function de(s){const a=f.find(l=>l.id===s);if(!a)throw new Error(`Deck with ID "${s}" not found`);const t={deckId:s,isValid:!0,missingCards:[],totalCards:78,availableCards:0};for(let l=0;l<=21;l++){const d=l.toString().padStart(2,"0"),c=`${a.basePath}/major/${d}-${T(l)}.jpg`;await M(c)?t.availableCards++:(t.missingCards.push(`Major Arcana: ${T(l)}`),t.isValid=!1)}const o=["cups","wands","swords","pentacles"],n=["ace","two","three","four","five","six","seven","eight","nine","ten","page","knight","queen","king"];for(const l of o)for(const d of n){const c=`${a.basePath}/minor/${l}/${d}-${l}.jpg`;await M(c)?t.availableCards++:(t.missingCards.push(`Minor Arcana: ${d} of ${l}`),t.isValid=!1)}return t}function T(s){return["fool","magician","high-priestess","empress","emperor","hierophant","lovers","chariot","strength","hermit","wheel-of-fortune","justice","hanged-man","death","temperance","devil","tower","star","moon","sun","judgement","world"][s]||""}async function me(){const s=[];for(const a of f){const t=await de(a.id);s.push(t)}return s}function je(){const[s,a]=u.useState("decks"),[t,o]=u.useState([]),[n,l]=u.useState(!0),[d,c]=u.useState(X().id);u.useEffect(()=>{async function r(){try{const i=await me();o(i)}catch(i){console.error("Error loading deck info:",i)}finally{l(!1)}}r()},[]);const m=r=>{Y(r),c(r)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(W,{}),e.jsxs("main",{className:"container max-w-4xl mx-auto px-4 py-8 mt-16",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"font-heading text-3xl md:text-4xl font-bold mb-4 text-light",children:"Tarot Deck Management"}),e.jsx("p",{className:"text-light/80 max-w-2xl mx-auto",children:"Manage your tarot decks, check for missing cards, and set your preferred deck."})]}),e.jsxs(Z,{defaultValue:"decks",value:s,onValueChange:a,children:[e.jsxs(G,{className:"grid w-full grid-cols-2 mb-8",children:[e.jsx(b,{value:"decks",children:"Available Decks"}),e.jsx(b,{value:"upload",children:"Upload New Deck"})]}),e.jsxs(N,{value:"decks",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n?e.jsx(h,{className:"col-span-full",children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent mb-4"}),e.jsx("p",{className:"text-light/80",children:"Loading deck information..."})]})})}):f.map(r=>{const i=t.find(O=>O.deckId===r.id),F=i?Math.round(i.availableCards/i.totalCards*100):0;return e.jsxs(h,{className:d===r.id?"border-accent":"",children:[e.jsxs(w,{children:[e.jsxs(k,{className:"flex items-center justify-between",children:[r.name,d===r.id&&e.jsx("span",{className:"text-xs bg-accent/20 text-accent px-2 py-1 rounded-full",children:"Active"})]}),e.jsx(y,{children:r.description})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-light/80",children:"Completion"}),e.jsxs("span",{className:"text-sm text-light/80",children:[(i==null?void 0:i.availableCards)||0,"/",(i==null?void 0:i.totalCards)||78]})]}),e.jsx(z,{value:F,className:"h-2"})]}),i&&i.missingCards.length>0&&e.jsxs(D,{variant:"destructive",className:"mb-4",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx(P,{children:"Missing Cards"}),e.jsxs(A,{children:[i.missingCards.length," cards are missing from this deck."]})]}),i&&i.missingCards.length===0&&e.jsxs(D,{className:"mb-4 bg-green-500/20 text-green-300 border-green-500/30",children:[e.jsx(ee,{className:"h-4 w-4"}),e.jsx(P,{children:"Complete Deck"}),e.jsx(A,{children:"All cards are available for this deck."})]})]}),e.jsxs(C,{className:"flex justify-between",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>window.open(`/images/tarot/decks/${r.id}`,"_blank"),children:"View Files"}),e.jsx(g,{variant:d===r.id?"secondary":"default",size:"sm",onClick:()=>m(r.id),disabled:d===r.id,children:d===r.id?"Current Deck":"Set as Active"})]})]},r.id)})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Download Rider-Waite Deck"}),e.jsxs(h,{children:[e.jsxs(x,{className:"pt-6",children:[e.jsx("p",{className:"mb-4 text-light/80",children:"You can download the Rider-Waite deck (public domain) using the script provided in the project. Run the following command in your terminal:"}),e.jsx("div",{className:"bg-dark/40 p-3 rounded-md font-mono text-sm mb-4",children:"npm run tarot:download-rider-waite"}),e.jsx("p",{className:"text-light/80 text-sm",children:"This will download and optimize the Rider-Waite deck images to the correct directories. Note that you may need to have ImageMagick installed for image resizing."})]}),e.jsx(C,{children:e.jsx(g,{className:"w-full",leftIcon:e.jsx(J,{className:"mr-2 h-4 w-4"}),children:"Download Instructions"})})]})]})]}),e.jsx(N,{value:"upload",children:e.jsxs(h,{children:[e.jsxs(w,{children:[e.jsx(k,{children:"Upload New Deck"}),e.jsx(y,{children:"Upload your own tarot deck images to use in the application."})]}),e.jsxs(x,{children:[e.jsxs("div",{className:"border-2 border-dashed border-light/20 rounded-lg p-8 text-center",children:[e.jsx(ae,{className:"h-12 w-12 mx-auto mb-4 text-light/40"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Drag & Drop Deck Images"}),e.jsx("p",{className:"text-light/60 mb-4",children:"Upload a ZIP file containing your tarot deck images following the required directory structure."}),e.jsx(g,{variant:"outline",className:"mx-auto",children:"Select ZIP File"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Required Structure"}),e.jsx("p",{className:"text-light/80 mb-2",children:"Your ZIP file should contain the following structure:"}),e.jsx("div",{className:"bg-dark/40 p-3 rounded-md font-mono text-sm mb-4",children:e.jsx("pre",{children:`your-deck-name/
├── major/
│   ├── 00-fool.jpg
│   ├── 01-magician.jpg
│   └── ...
└── minor/
    ├── cups/
    │   ├── ace-cups.jpg
    │   └── ...
    ├── wands/
    │   ├── ace-wands.jpg
    │   └── ...
    ├── swords/
    │   ├── ace-swords.jpg
    │   └── ...
    └── pentacles/
        ├── ace-pentacles.jpg
        └── ...`})}),e.jsx("p",{className:"text-light/60 text-sm",children:"Note: This feature is not yet implemented. For now, please manually add your deck images to the appropriate directories."})]})]})]})})]})]}),e.jsx(H,{})]})}export{je as default};
